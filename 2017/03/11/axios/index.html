<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <title>axios | Jar-R</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="axios 是一个基于Promise 用于浏览器和 nodejs 的 HTTP 客户端，它本身具有以下特征：从浏览器中创建 XMLHttpRequest从 node.js 发出 http 请求支持 Promise API拦截请求和响应转换请求和响应数据取消请求自动转换JSON数据客户端支持防止 CSRF/XSRF浏览器兼容性">
<meta property="og:type" content="article">
<meta property="og:title" content="axios">
<meta property="og:url" content="http://Jarweb.com/2017/03/11/axios/index.html">
<meta property="og:site_name" content="Jar-R">
<meta property="og:description" content="axios 是一个基于Promise 用于浏览器和 nodejs 的 HTTP 客户端，它本身具有以下特征：从浏览器中创建 XMLHttpRequest从 node.js 发出 http 请求支持 Promise API拦截请求和响应转换请求和响应数据取消请求自动转换JSON数据客户端支持防止 CSRF/XSRF浏览器兼容性">
<meta property="og:updated_time" content="2017-07-03T05:37:06.961Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="axios">
<meta name="twitter:description" content="axios 是一个基于Promise 用于浏览器和 nodejs 的 HTTP 客户端，它本身具有以下特征：从浏览器中创建 XMLHttpRequest从 node.js 发出 http 请求支持 Promise API拦截请求和响应转换请求和响应数据取消请求自动转换JSON数据客户端支持防止 CSRF/XSRF浏览器兼容性">
  
    <link rel="alternative" href="/atom.xml" title="Jar-R" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">
</head>

<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="http://img.ycwb.com/news/attachement/jpg/site2/20120717/001e90704bd5116f25f84a.jpg" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">任先生在路上</a></h1>
		</hgroup>

		
		<p class="header-subtitle" style="margin-bottom:20px;">Good things are coming !</p>
		

		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">列表</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/Jarweb" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="http://weibo.com/" title="weibo">weibo</a>
					        
						</div>
					</nav>
				</section>
				
				
				
				

				
			</div>
		</div>
	</header>				
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger" style="display:none;"></div>
  		<h1 class="header-author js-mobile-header hide">任先生在路上</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
			
				<img lazy-src="http://img.ycwb.com/news/attachement/jpg/site2/20120717/001e90704bd5116f25f84a.jpg" class="js-avatar">
			
			</div>
			<hgroup>
			  <h1 class="header-author">任先生在路上</h1>
			</hgroup>
			
			<p class="header-subtitle">Good things are coming !</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">列表</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/Jarweb" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="http://weibo.com/" title="weibo">weibo</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>

      <div class="body-wrap"><article id="post-axios" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/03/11/axios/" class="article-date">
  	<time datetime="2017-03-10T16:00:00.000Z" itemprop="datePublished">2017-03-11</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      axios
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/js/">js</a></li></ul>
	</div>

        

        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="axios-是一个基于Promise-用于浏览器和-nodejs-的-HTTP-客户端，它本身具有以下特征："><a href="#axios-是一个基于Promise-用于浏览器和-nodejs-的-HTTP-客户端，它本身具有以下特征：" class="headerlink" title="axios 是一个基于Promise 用于浏览器和 nodejs 的 HTTP 客户端，它本身具有以下特征："></a>axios 是一个基于Promise 用于浏览器和 nodejs 的 HTTP 客户端，它本身具有以下特征：</h2><p>从浏览器中创建 XMLHttpRequest<br>从 node.js 发出 http 请求<br>支持 Promise API<br>拦截请求和响应<br>转换请求和响应数据<br>取消请求<br>自动转换JSON数据<br>客户端支持防止 CSRF/XSRF<br>浏览器兼容性</p>
<a id="more"></a>
<h2 id="引入方式："><a href="#引入方式：" class="headerlink" title="引入方式："></a>引入方式：</h2><p>$ npm install axios<br>$ cnpm install axios //taobao源<br>$ bower install axios</p>
<p>或者使用cdn：</p>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>

<p>执行 GET 请求<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">// &#21521;&#20855;&#26377;&#25351;&#23450;ID&#30340;&#29992;&#25143;&#21457;&#20986;&#35831;&#27714;&#10;axios&#10;  .get(&#39;/user?ID=12345&#39;)&#10;  .then(function (response) &#123;&#10;    console.log(response);&#10;  &#125;)&#10;  .catch(function (error) &#123;&#10;    console.log(error);&#10;  &#125;);&#10;// &#20063;&#21487;&#20197;&#36890;&#36807; params &#23545;&#35937;&#20256;&#36882;&#21442;&#25968;&#10;axios&#10;  .get(&#39;/user&#39;, &#123;&#10;    params: &#123;&#10;      ID: 12345&#10;    &#125;&#10;  &#125;)&#10;  .then(function (response) &#123;&#10;    console.log(response);&#10;  &#125;)&#10;  .catch(function (error) &#123;&#10;    console.log(error);&#10;  &#125;);</span><br></pre></td></tr></table></figure></p>
<p>执行 POST 请求<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">axios&#10;  .post(&#39;/user&#39;, &#123;&#10;    firstName: &#39;Fred&#39;,&#10;    lastName: &#39;Flintstone&#39;&#10;  &#125;)&#10;  .then(function (response) &#123;&#10;    console.log(response);&#10;  &#125;)&#10;  .catch(function (error) &#123;&#10;    console.log(error);&#10;  &#125;);</span><br></pre></td></tr></table></figure></p>
<p>执行多个并发请求<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">function getUserAccount() &#123;&#10;  return axios.get(&#39;/user/12345&#39;);&#10;&#125;&#10;function getUserPermissions() &#123;&#10;  return axios.get(&#39;/user/12345/permissions&#39;);&#10;&#125;&#10;axios&#10;  .all([getUserAccount(), getUserPermissions()])&#10;  .then(axios.spread(function (acct, perms) &#123;&#10;    //&#20004;&#20010;&#35831;&#27714;&#29616;&#24050;&#23436;&#25104;&#10;  &#125;));</span><br></pre></td></tr></table></figure></p>
<p>axios(config)<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">// &#21457;&#36865;&#19968;&#20010; POST &#35831;&#27714;&#10;axios(&#123;&#10;  method: &#39;post&#39;,&#10;  url: &#39;/user/12345&#39;,&#10;  data: &#123;&#10;    firstName: &#39;Fred&#39;,&#10;    lastName: &#39;Flintstone&#39;&#10;  &#125;&#10;&#125;);&#10;axios(url[, config])</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">// &#21457;&#36865;&#19968;&#20010; GET &#35831;&#27714; (GET&#35831;&#27714;&#26159;&#40664;&#35748;&#35831;&#27714;&#27169;&#24335;)&#10;axios(&#39;/user/12345&#39;);&#10;axios.request(config)&#10;axios.get(url [&#65292;config])&#10;axios.delete(url [&#65292;config])&#10;axios.head(url [&#65292;config])&#10;axios.post(url [&#65292;data [&#65292;config]])&#10;axios.put(url [&#65292;data [&#65292;config]])&#10;axios.patch(url [&#65292;data [&#65292;config]])</span><br></pre></td></tr></table></figure>
<p>帮助函数处理并发请求。<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">axios.all(iterable)&#10;axios.spread(callback)</span><br></pre></td></tr></table></figure></p>
<p>创建实例<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">axios.create([config])&#10;&#10;var instance = axios.create(&#123;&#10;  baseURL: &#39;https://some-domain.com/api/&#39;,&#10;  timeout: 1000,&#10;  headers: &#123;&#39;X-Custom-Header&#39;: &#39;foobar&#39;&#125;&#10;&#125;);</span><br></pre></td></tr></table></figure></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">axios&#65283;request(config)&#10;axios&#65283;get(url [&#65292;config])&#10;axios&#65283;delete(url [&#65292;config])&#10;axios&#65283;head(url [&#65292;config])&#10;axios&#65283;post(url [&#65292;data [&#65292;config]])&#10;axios&#65283;put(url [&#65292;data [&#65292;config]])&#10;axios&#65283;patch(url [&#65292;data [&#65292;config]])</span><br></pre></td></tr></table></figure>
<p>请求配置<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#10;  // `url`&#26159;&#23558;&#29992;&#20110;&#35831;&#27714;&#30340;&#26381;&#21153;&#22120;URL&#10;  url: &#39;/user&#39;,&#10;  // `method`&#26159;&#21457;&#20986;&#35831;&#27714;&#26102;&#20351;&#29992;&#30340;&#35831;&#27714;&#26041;&#27861;&#10;  method: &#39;get&#39;, // &#40664;&#35748;&#10;  // `baseURL`&#23558;&#34987;&#28155;&#21152;&#21040;`url`&#21069;&#38754;&#65292;&#38500;&#38750;`url`&#26159;&#32477;&#23545;&#30340;&#12290;&#10;  // &#21487;&#20197;&#26041;&#20415;&#22320;&#20026; axios &#30340;&#23454;&#20363;&#35774;&#32622;`baseURL`&#65292;&#20197;&#20415;&#23558;&#30456;&#23545; URL &#20256;&#36882;&#32473;&#35813;&#23454;&#20363;&#30340;&#26041;&#27861;&#12290;&#10;  baseURL: &#39;https://some-domain.com/api/&#39;,&#10;  // `transformRequest`&#20801;&#35768;&#22312;&#35831;&#27714;&#25968;&#25454;&#21457;&#36865;&#21040;&#26381;&#21153;&#22120;&#20043;&#21069;&#23545;&#20854;&#36827;&#34892;&#26356;&#25913;&#10;  // &#36825;&#21482;&#36866;&#29992;&#20110;&#35831;&#27714;&#26041;&#27861;&#39;PUT&#39;&#65292;&#39;POST&#39;&#21644;&#39;PATCH&#39;&#10;  // &#25968;&#32452;&#20013;&#30340;&#26368;&#21518;&#19968;&#20010;&#20989;&#25968;&#24517;&#39035;&#36820;&#22238;&#19968;&#20010;&#23383;&#31526;&#20018;&#65292;&#19968;&#20010; ArrayBuffer&#25110;&#19968;&#20010; Stream&#10;  transformRequest: [function (data) &#123;&#10;    // &#20570;&#20219;&#20309;&#20320;&#24819;&#35201;&#30340;&#25968;&#25454;&#36716;&#25442;&#10;    return data;&#10;  &#125;],&#10;  // `transformResponse`&#20801;&#35768;&#22312; then / catch&#20043;&#21069;&#23545;&#21709;&#24212;&#25968;&#25454;&#36827;&#34892;&#26356;&#25913;&#10;  transformResponse: [function (data) &#123;&#10;    // Do whatever you want to transform the data&#10;    return data;&#10;  &#125;],&#10;  // `headers`&#26159;&#35201;&#21457;&#36865;&#30340;&#33258;&#23450;&#20041; headers&#10;  headers: &#123;&#39;X-Requested-With&#39;: &#39;XMLHttpRequest&#39;&#125;,&#10;  // `params`&#26159;&#35201;&#19982;&#35831;&#27714;&#19968;&#36215;&#21457;&#36865;&#30340;URL&#21442;&#25968;&#10;  // &#24517;&#39035;&#26159;&#32431;&#23545;&#35937;&#25110;URLSearchParams&#23545;&#35937;&#10;  params: &#123;&#10;    ID: 12345&#10;  &#125;,&#10;  // `paramsSerializer`&#26159;&#19968;&#20010;&#21487;&#36873;&#30340;&#20989;&#25968;&#65292;&#36127;&#36131;&#24207;&#21015;&#21270;`params`&#10;  // (e.g. https://www.npmjs.com/package/qs, http://api.jquery.com/jquery.param/)&#10;  paramsSerializer: function(params) &#123;&#10;    return Qs.stringify(params, &#123;arrayFormat: &#39;brackets&#39;&#125;)&#10;  &#125;,&#10;  // `data`&#26159;&#35201;&#20316;&#20026;&#35831;&#27714;&#20027;&#20307;&#21457;&#36865;&#30340;&#25968;&#25454;&#10;  // &#20165;&#36866;&#29992;&#20110;&#35831;&#27714;&#26041;&#27861;&#8220;PUT&#8221;&#65292;&#8220;POST&#8221;&#21644;&#8220;PATCH&#8221;&#10;  // &#24403;&#27809;&#26377;&#35774;&#32622;`transformRequest`&#26102;&#65292;&#24517;&#39035;&#26159;&#20197;&#19979;&#31867;&#22411;&#20043;&#19968;&#65306;&#10;  // - string, plain object, ArrayBuffer, ArrayBufferView, URLSearchParams&#10;  // - Browser only: FormData, File, Blob&#10;  // - Node only: Stream&#10;  data: &#123;&#10;    firstName: &#39;Fred&#39;&#10;  &#125;,&#10;  // `timeout`&#25351;&#23450;&#35831;&#27714;&#36229;&#26102;&#20043;&#21069;&#30340;&#27627;&#31186;&#25968;&#12290;&#10;  // &#22914;&#26524;&#35831;&#27714;&#30340;&#26102;&#38388;&#36229;&#36807;&#39;timeout&#39;&#65292;&#35831;&#27714;&#23558;&#34987;&#20013;&#27490;&#12290;&#10;  timeout: 1000,&#10;  // `withCredentials`&#25351;&#31034;&#26159;&#21542;&#36328;&#31449;&#28857;&#35775;&#38382;&#25511;&#21046;&#35831;&#27714;&#10;  // should be made using credentials&#10;  withCredentials: false, // default&#10;  // `adapter&#39;&#20801;&#35768;&#33258;&#23450;&#20041;&#22788;&#29702;&#35831;&#27714;&#65292;&#36825;&#20351;&#24471;&#27979;&#35797;&#26356;&#23481;&#26131;&#12290;&#10;  // &#36820;&#22238;&#19968;&#20010;promise&#24182;&#25552;&#20379;&#19968;&#20010;&#26377;&#25928;&#30340;&#21709;&#24212;(&#21442;&#35265;[response docs](&#65283;response-api)&#10;  adapter: function (config) &#123;&#10;    /* ... */&#10;  &#125;,&#10;  // `auth&#39;&#34920;&#31034;&#24212;&#35813;&#20351;&#29992; HTTP &#22522;&#26412;&#35748;&#35777;&#65292;&#24182;&#25552;&#20379;&#20973;&#25454;&#12290;&#10;  // &#36825;&#23558;&#35774;&#32622;&#19968;&#20010;`Authorization&#39;&#22836;&#65292;&#35206;&#30422;&#20219;&#20309;&#29616;&#26377;&#30340;`Authorization&#39;&#33258;&#23450;&#20041;&#22836;&#65292;&#20351;&#29992;`headers`&#35774;&#32622;&#12290;&#10;  auth: &#123;&#10;    username: &#39;janedoe&#39;,&#10;    password: &#39;s00pers3cret&#39;&#10;  &#125;,&#10;  // &#8220;responseType&#8221;&#34920;&#31034;&#26381;&#21153;&#22120;&#23558;&#21709;&#24212;&#30340;&#25968;&#25454;&#31867;&#22411;&#10;  // &#21253;&#25324; &#39;arraybuffer&#39;, &#39;blob&#39;, &#39;document&#39;, &#39;json&#39;, &#39;text&#39;, &#39;stream&#39;&#10;  responseType: &#39;json&#39;, // default&#10;  //`xsrfCookieName`&#26159;&#35201;&#29992;&#20316; xsrf &#20196;&#29260;&#30340;&#20540;&#30340;cookie&#30340;&#21517;&#31216;&#10;  xsrfCookieName: &#39;XSRF-TOKEN&#39;, // default&#10;  // `xsrfHeaderName`&#26159;&#25658;&#24102;xsrf&#20196;&#29260;&#20540;&#30340;http&#22836;&#30340;&#21517;&#31216;&#10;  xsrfHeaderName: &#39;X-XSRF-TOKEN&#39;, // default&#10;  // `onUploadProgress`&#20801;&#35768;&#22788;&#29702;&#19978;&#20256;&#30340;&#36827;&#24230;&#20107;&#20214;&#10;  onUploadProgress: function (progressEvent) &#123;&#10;    // &#20351;&#29992;&#26412;&#22320; progress &#20107;&#20214;&#20570;&#20219;&#20309;&#20320;&#24819;&#35201;&#20570;&#30340;&#10;  &#125;,&#10;  // `onDownloadProgress`&#20801;&#35768;&#22788;&#29702;&#19979;&#36733;&#30340;&#36827;&#24230;&#20107;&#20214;&#10;  onDownloadProgress: function (progressEvent) &#123;&#10;    // Do whatever you want with the native progress event&#10;  &#125;,&#10;  // `maxContentLength`&#23450;&#20041;&#20801;&#35768;&#30340;http&#21709;&#24212;&#20869;&#23481;&#30340;&#26368;&#22823;&#22823;&#23567;&#10;  maxContentLength: 2000,&#10;  // `validateStatus`&#23450;&#20041;&#26159;&#21542;&#35299;&#26512;&#25110;&#25298;&#32477;&#32473;&#23450;&#30340;promise&#10;  // HTTP&#21709;&#24212;&#29366;&#24577;&#30721;&#12290;&#22914;&#26524;`validateStatus`&#36820;&#22238;`true`(&#25110;&#34987;&#35774;&#32622;&#20026;`null` promise&#23558;&#34987;&#35299;&#26512;;&#21542;&#21017;&#65292;promise&#23558;&#34987;&#10;  // &#25298;&#32477;&#12290;&#10;  validateStatus: function (status) &#123;&#10;    return status &#62;= 200 &#38;&#38; status &#60; 300; // default&#10;  &#125;,&#10;  // `maxRedirects`&#23450;&#20041;&#22312;node.js&#20013;&#35201;&#36981;&#24490;&#30340;&#37325;&#23450;&#21521;&#30340;&#26368;&#22823;&#25968;&#37327;&#12290;&#10;  // &#22914;&#26524;&#35774;&#32622;&#20026;0&#65292;&#21017;&#19981;&#20250;&#36981;&#24490;&#37325;&#23450;&#21521;&#12290;&#10;  maxRedirects: 5, // &#40664;&#35748;&#10;  // `httpAgent`&#21644;`httpsAgent`&#29992;&#20110;&#23450;&#20041;&#22312;node.js&#20013;&#20998;&#21035;&#25191;&#34892;http&#21644;https&#35831;&#27714;&#26102;&#20351;&#29992;&#30340;&#33258;&#23450;&#20041;&#20195;&#29702;&#12290;&#10;  // &#20801;&#35768;&#37197;&#32622;&#31867;&#20284;`keepAlive`&#30340;&#36873;&#39033;&#65292;&#10;  // &#40664;&#35748;&#24773;&#20917;&#19979;&#19981;&#21551;&#29992;&#12290;&#10;  httpAgent: new http.Agent(&#123; keepAlive: true &#125;),&#10;  httpsAgent: new https.Agent(&#123; keepAlive: true &#125;),&#10;  // &#39;proxy&#39;&#23450;&#20041;&#20195;&#29702;&#26381;&#21153;&#22120;&#30340;&#20027;&#26426;&#21517;&#21644;&#31471;&#21475;&#10;  // `auth`&#34920;&#31034;HTTP Basic auth&#24212;&#35813;&#29992;&#20110;&#36830;&#25509;&#21040;&#20195;&#29702;&#65292;&#24182;&#25552;&#20379;credentials&#12290;&#10;  // &#36825;&#23558;&#35774;&#32622;&#19968;&#20010;`Proxy-Authorization` header&#65292;&#35206;&#30422;&#20219;&#20309;&#20351;&#29992;`headers`&#35774;&#32622;&#30340;&#29616;&#26377;&#30340;`Proxy-Authorization` &#33258;&#23450;&#20041; headers&#12290;&#10;  proxy: &#123;&#10;    host: &#39;127.0.0.1&#39;,&#10;    port: 9000,&#10;    auth: : &#123;&#10;      username: &#39;mikeymike&#39;,&#10;      password: &#39;rapunz3l&#39;&#10;    &#125;&#10;  &#125;,&#10;  // &#8220;cancelToken&#8221;&#25351;&#23450;&#21487;&#29992;&#20110;&#21462;&#28040;&#35831;&#27714;&#30340;&#21462;&#28040;&#20196;&#29260;&#10;  // (see Cancellation section below for details)&#10;  cancelToken: new CancelToken(function (cancel) &#123;&#10;  &#125;)&#10;&#125;</span><br></pre></td></tr></table></figure></p>
<p>使用 then 时，您将收到如下响应：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">axios&#10;  .get(&#39;/user/12345&#39;)&#10;  .then(function(response) &#123;&#10;    console.log(response.data);&#10;    console.log(response.status);&#10;    console.log(response.statusText);&#10;    console.log(response.headers);&#10;    console.log(response.config);&#10;  &#125;);</span><br></pre></td></tr></table></figure></p>
<p>配置默认值,全局axios默认值<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">axios.defaults.baseURL = &#39;https://api.example.com&#39;;&#10;axios.defaults.headers.common[&#39;Authorization&#39;] = AUTH_TOKEN;&#10;axios.defaults.headers.post[&#39;Content-Type&#39;] = &#39;application/x-www-form-urlencoded&#39;;&#10;&#10;//&#22312;&#21019;&#24314;&#23454;&#20363;&#26102;&#35774;&#32622;&#37197;&#32622;&#40664;&#35748;&#20540;&#10;var instance = axios.create(&#123;&#10;   baseURL&#65306;&#39;https://api.example.com&#39;&#10;&#125;);&#10; &#10;//&#22312;&#23454;&#20363;&#21019;&#24314;&#21518;&#25913;&#21464;&#40664;&#35748;&#20540;&#10;instance.defaults.headers.common [&#39;Authorization&#39;] = AUTH_TOKEN;</span><br></pre></td></tr></table></figure></p>
<p>配置优先级顺序</p>
<p>配置将与优先顺序合并。 顺序是lib / defaults.js中的库默认值，然后是实例的defaults属性，最后是请求的config参数。 后者将优先于前者。 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">//&#20351;&#29992;&#24211;&#25552;&#20379;&#30340;&#37197;&#32622;&#40664;&#35748;&#20540;&#21019;&#24314;&#23454;&#20363;&#10;//&#27492;&#26102;&#65292;&#36229;&#26102;&#37197;&#32622;&#20540;&#20026;`0`&#65292;&#36825;&#26159;&#24211;&#30340;&#40664;&#35748;&#20540;&#10;var instance = axios.create();&#10; &#10;//&#35206;&#30422;&#24211;&#30340;&#36229;&#26102;&#40664;&#35748;&#20540;&#10;//&#29616;&#22312;&#25152;&#26377;&#35831;&#27714;&#23558;&#22312;&#36229;&#26102;&#21069;&#31561;&#24453;2.5&#31186;&#10;instance.defaults.timeout = 2500;&#10; &#10;//&#35206;&#30422;&#27492;&#35831;&#27714;&#30340;&#36229;&#26102;&#65292;&#22240;&#20026;&#23427;&#30693;&#36947;&#38656;&#35201;&#24456;&#38271;&#26102;&#38388;&#10;instance.get(&#39;/ longRequest&#39;&#65292;&#123;&#10;   timeout&#65306;5000&#10;&#125;);</span><br></pre></td></tr></table></figure>
<p>拦截器<br>你可以截取请求或响应在被 then 或者 catch 处理之前<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">//&#28155;&#21152;&#35831;&#27714;&#25318;&#25130;&#22120;&#10;axios.interceptors.request.use(function(config)&#123;&#10;     //&#22312;&#21457;&#36865;&#35831;&#27714;&#20043;&#21069;&#20570;&#26576;&#20107;&#10;     return config;&#10;   &#125;&#65292;function(error)&#123;&#10;     //&#35831;&#27714;&#38169;&#35823;&#26102;&#20570;&#20123;&#20107;&#10;     return Promise.reject(error);&#10;   &#125;);&#10; &#10;//&#28155;&#21152;&#21709;&#24212;&#25318;&#25130;&#22120;&#10;axios.interceptors.response.use(function(response)&#123;&#10;     //&#23545;&#21709;&#24212;&#25968;&#25454;&#20570;&#20123;&#20107;&#10;      return response;&#10;   &#125;&#65292;function(error)&#123;&#10;     //&#35831;&#27714;&#38169;&#35823;&#26102;&#20570;&#20123;&#20107;&#10;     return Promise.reject(error);&#10;   &#125;);&#10;&#10;//&#22914;&#26524;&#20320;&#20197;&#21518;&#21487;&#33021;&#38656;&#35201;&#21024;&#38500;&#25318;&#25130;&#22120;&#12290;&#10;var myInterceptor = axios.interceptors.request.use(function () &#123;/*...*/&#125;);&#10;axios.interceptors.request.eject(myInterceptor);&#10;&#10;//&#20320;&#21487;&#20197;&#23558;&#25318;&#25130;&#22120;&#28155;&#21152;&#21040;axios&#30340;&#33258;&#23450;&#20041;&#23454;&#20363;&#12290;&#10;var instance = axios.create();&#10;instance.interceptors.request.use(function () &#123;/*...*/&#125;);&#10;&#10;axios.get(&#39;/ user / 12345&#39;)&#10;   .catch(function(error)&#123;&#10;     if(error.response)&#123;&#10;       //&#35831;&#27714;&#24050;&#21457;&#20986;&#65292;&#20294;&#26381;&#21153;&#22120;&#20351;&#29992;&#29366;&#24577;&#20195;&#30721;&#36827;&#34892;&#21709;&#24212;&#10;       //&#33853;&#22312;2xx&#30340;&#33539;&#22260;&#20043;&#22806;&#10;       console.log(error.response.data);&#10;       console.log(error.response.status);&#10;       console.log(error.response.headers);&#10;     &#125; else &#123;&#10;       //&#22312;&#35774;&#32622;&#35302;&#21457;&#38169;&#35823;&#30340;&#35831;&#27714;&#26102;&#21457;&#29983;&#20102;&#38169;&#35823;&#10;       console.log(&#39;Error&#39;&#65292;error.message);&#10;     &#125;&#125;&#10;     console.log(error.config);&#10;   &#125;);&#10;&#10;//&#24744;&#21487;&#20197;&#20351;&#29992;validateStatus&#37197;&#32622;&#36873;&#39033;&#23450;&#20041;&#33258;&#23450;&#20041;HTTP&#29366;&#24577;&#30721;&#38169;&#35823;&#33539;&#22260;&#12290;&#10;axios.get(&#39;/ user / 12345&#39;&#65292;&#123;&#10;  validateStatus&#65306;function(status)&#123;&#10;     return status &#60; 500; //&#20165;&#24403;&#29366;&#24577;&#20195;&#30721;&#22823;&#20110;&#25110;&#31561;&#20110;500&#26102;&#25298;&#32477;&#10;  &#125;&#125;</span><br></pre></td></tr></table></figure></p>

      
    </div>
    
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2017/03/12/prefetch/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption"><</strong>
      <div class="article-nav-title">
        
          prefetch
        
      </div>
    </a>
  
  
    <a href="/2017/03/04/bind实现/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">bind实现</div>
      <strong class="article-nav-caption">></strong>
    </a>
  
</nav>

  
</article>








</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
      <div>&copy; 2017 任先生在路上 的博客 , 技术 
        <a href="http://hexo.io/" target="_blank">Hexo</a>  
      </div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: false,
		isPost: true,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js" type="text/javascript"></script>
<script src="/js/main.js" type="text/javascript"></script>






<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  </div>
</body>
</html>